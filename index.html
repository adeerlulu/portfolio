<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>+1 Design</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;500&family=Lora:ital,wght@0,400..700;1,400..700&family=Noto+Sans+TC:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        html { scroll-behavior: smooth; }

        /* --- 1. Contact Section --- */
        .contact-section { padding: 120px 5%; background: #fff; scroll-margin-top: 100px; }
        .container-700 { max-width: 700px; margin: 0 auto; }
        
        .contact-title { font-family: "Lora", serif; font-size: 28px; font-weight: 300; margin-bottom: 60px; color: #1a1a1a; text-align: left; }

        /* --- 2. 表單與輸入框 --- */
        .contact-form { font-family: "Lora", "Noto Sans TC", serif; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }
        .form-group { margin-bottom: 35px; text-align: left; position: relative; }

        .form-group label { font-size: 11px; color: #1a1a1a; font-weight: 500; letter-spacing: 1.5px; display: block; margin-bottom: 10px; text-transform: uppercase; }
        
        .form-group input, .form-group textarea { 
            width: 100%; border: none; border-bottom: 1px solid #eee; padding: 10px 0; 
            font-size: 14px; outline: none; background: transparent; transition: all 0.4s; border-radius: 0; color: #1a1a1a;
        }

        .form-group input::placeholder, .form-group textarea::placeholder { color: #d1d1d1; font-weight: 300; }
        .form-group input:focus, .form-group textarea:focus { border-bottom: 1px solid #1a1a1a; }

        /* 錯誤狀態樣式 */
        .form-group.error input, .form-group.error textarea { border-bottom: 1px solid #e74c3c; }

        /* --- 3. 驗證碼 --- */
        .captcha-row { display: flex; justify-content: space-between; align-items: flex-end; margin-top: 20px; }
        .captcha-input-group { display: flex; align-items: center; }
        #captchaDisplay { 
            font-family: "Lora", serif; font-weight: 700; font-size: 20px; padding: 5px 18px; 
            border: 1px solid #f0f0f0; margin-right: 20px; letter-spacing: 5px; user-select: none; background: #fafafa;
        }
        #captchaInput { width: 80px; text-align: center; }

        /* --- 4. 圓框按鈕 --- */
        .submit-btn {
            background: #1a1a1a; color: #fff; border: 1px solid #1a1a1a; padding: 10px 28px;
            border-radius: 40px; font-size: 13px; font-family: "Noto Sans TC", sans-serif;
            cursor: pointer; display: flex; align-items: center; gap: 15px; transition: all 0.4s ease;
        }
        .arrow-icon { width: 40px; height: 12px; transition: transform 0.6s cubic-bezier(0.19, 1, 0.22, 1); }
        .submit-btn:hover .arrow-icon { transform: translateX(10px); }

        /* --- 5. 自定義跳窗 (Modal) --- */
        .custom-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.9); display: flex; align-items: center; justify-content: center;
            z-index: 10000; opacity: 0; visibility: hidden; transition: all 0.5s ease;
        }
        .custom-modal.active { opacity: 1; visibility: visible; }
        .modal-content {
            background: #fff; padding: 50px 80px; border: 1px solid #f0f0f0; text-align: center;
            max-width: 500px; box-shadow: 0 10px 30px rgba(0,0,0,0.03); transform: translateY(20px); transition: all 0.5s ease;
        }
        .custom-modal.active .modal-content { transform: translateY(0); }
        .modal-title { font-family: "Lora", serif; font-size: 24px; margin-bottom: 15px; color: #1a1a1a; }
        .modal-text { font-family: "Noto Sans TC", sans-serif; font-size: 14px; color: #666; margin-bottom: 30px; letter-spacing: 1px; }
        .modal-btn {
            background: #1a1a1a; color: #fff; border: none; padding: 10px 40px; border-radius: 40px;
            font-size: 12px; cursor: pointer; transition: opacity 0.3s;
        }
        .modal-btn:hover { opacity: 0.8; }

        @media (max-width: 768px) { 
            .form-row { grid-template-columns: 1fr; gap: 0; } 
            .captcha-row { flex-direction: column; align-items: flex-start; gap: 30px; }
            .modal-content { padding: 40px 10%; width: 80%; }
        }
    </style>
</head>
<body>

    <main class="works-section" id="works">
        <div id="works-grid" class="grid"></div>
    </main>

    <footer class="contact-section" id="contact">
        <div class="container-700 reveal-section">
            <h2 class="contact-title">Contact us</h2>
            <form id="contactForm" action="https://formspree.io/f/xlggeplo" method="POST" class="contact-form">
                <div class="form-row">
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" name="name" required placeholder="聯絡人">
                    </div>
                    <div class="form-group">
                        <label>LINE ID</label>
                        <input type="text" name="line_id" placeholder="選填">
                    </div>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" name="email" required placeholder="電子信箱">
                </div>
                <div class="form-group">
                    <label>Message</label>
                    <textarea name="message" rows="2" placeholder="請輸入欲洽詢內容"></textarea>
                </div>
                <div class="captcha-row">
                    <div class="form-group" style="margin-bottom: 0;">
                        <label>Verification Code</label>
                        <div class="captcha-input-group">
                            <span id="captchaDisplay"></span>
                            <input type="text" id="captchaInput" required placeholder="驗證碼">
                        </div>
                    </div>
                    <div class="submit-wrap">
                        <button type="submit" class="submit-btn" id="submitBtn">
                            <span>送出訊息</span>
                            <svg class="arrow-icon" viewBox="0 0 50 12">
                                <line x1="0" y1="6" x2="48" y2="6" stroke="currentColor" stroke-width="0.5" />
                                <polyline points="44,2 48,6 44,10" fill="none" stroke="currentColor" stroke-width="0.5" />
                            </svg>
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </footer>

    <div class="custom-modal" id="infoModal">
        <div class="modal-content">
            <h3 class="modal-title" id="modalTitle">Success</h3>
            <p class="modal-text" id="modalText">您的訊息已成功送出。</p>
            <button class="modal-btn" onclick="closeModal()">CLOSE</button>
        </div>
    </div>

    <script src="data.js"></script>
    <script src="script.js"></script>

    <script>
        // 跳窗控制功能
        function showModal(title, text) {
            document.getElementById('modalTitle').innerText = title;
            document.getElementById('modalText').innerText = text;
            document.getElementById('infoModal').classList.add('active');
        }
        function closeModal() {
            document.getElementById('infoModal').classList.remove('active');
        }

        // 太陽旋轉與驗證碼邏輯 (保留上一版)
        let currentCaptcha = "";
        const brandColors = [
            { bg: '#f4f1ea', text: '#1a1a1a', border: '#d1cfc7' }, 
            { bg: '#e2e2e2', text: '#1a1a1a', border: '#cccccc' }, 
            { bg: '#d7c4b7', text: '#1a1a1a', border: '#c5b0a2' }
        ];

        function generateCaptcha() {
            const chars = "0123456789";
            let result = "";
            for (let i = 0; i < 4; i++) result += chars.charAt(Math.floor(Math.random() * chars.length));
            currentCaptcha = result;
            const display = document.getElementById('captchaDisplay');
            if (display) {
                display.innerText = result;
                const randomColor = brandColors[Math.floor(Math.random() * brandColors.length)];
                display.style.color = randomColor.bg === '#f4f1ea' ? '#d7c4b7' : randomColor.bg;
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            generateCaptcha();

            // 表單校驗與送出
            const contactForm = document.getElementById('contactForm');
            contactForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                // 清除之前的錯誤狀態
                document.querySelectorAll('.form-group').forEach(el => el.classList.remove('error'));

                // 檢查驗證碼
                if (document.getElementById('captchaInput').value !== currentCaptcha) {
                    document.getElementById('captchaInput').parentElement.parentElement.classList.add('error');
                    showModal("Verification Error", "驗證碼輸入錯誤，請重新確認。");
                    generateCaptcha();
                    return;
                }

                const submitBtn = document.getElementById('submitBtn');
                const originalHTML = submitBtn.innerHTML;
                submitBtn.innerText = "送出中...";
                submitBtn.disabled = true;

                try {
                    const response = await fetch(this.action, {
                        method: 'POST',
                        body: new FormData(this),
                        headers: { 'Accept': 'application/json' }
                    });
                    if (response.ok) {
                        showModal("Sent Successfully", "訊息已送出，我們會盡快與您聯繫。");
                        this.reset();
                        generateCaptcha();
                    } else {
                        showModal("Error", "發送失敗，請檢查網路連線或稍後再試。");
                    }
                } catch (error) {
                    showModal("Error", "系統異常，目前無法送出。");
                } finally {
                    submitBtn.innerHTML = originalHTML;
                    submitBtn.disabled = false;
                }
            });
        });
    </script>
</body>
</html>
