<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Detail | +1 Design</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">
    
    <style>
        /* --- Layout & Basic --- */
        .container-1024 { max-width: 1024px; margin: 0 auto; padding: 0 40px; }
        .project-container { padding-top: 180px; } 
        .project-info { text-align: left; margin-bottom: 60px; }

        /* --- Image Protection --- */
        img { 
            -webkit-user-drag: none; 
            user-select: none;
            pointer-events: none; 
        }

        /* --- Typography --- */
        #proj-category { font-size: 13px; letter-spacing: 2px; text-transform: uppercase; color: #888; display: block; margin-bottom: 8px; font-family: "Lora", serif; }
        #proj-title { font-size: clamp(1.5rem, 4vw, 3rem); font-weight: 400; margin: 0; line-height: 1.1; font-family: "Lora", serif; }

        /* Animation: Black Line (Title) */
        .title-wrapper { position: relative; display: inline-block; margin-bottom: 35px; }
        .title-line { 
            position: absolute; bottom: -12px; left: 0; 
            height: 1px; background: #1a1a1a; width: 0;
            animation: lineReveal 1.2s cubic-bezier(0.22, 1, 0.36, 1) forwards;
            animation-delay: 0.5s;
        }
        @keyframes lineReveal { from { width: 0; } to { width: 100%; } }

        #proj-desc { font-size: 14px; line-height: 2.2; color: #333; white-space: pre-line; max-width: 750px; font-family: "Lora", serif; }

        /* --- Scroll Reveal Animation --- */
        .gallery-item { 
            width: 100%; 
            height: auto; 
            margin-bottom: 60px; 
            display: block; 
            opacity: 0; 
            transform: translateY(30px); 
            transition: opacity 1.2s cubic-bezier(0.22, 1, 0.36, 1), 
                        transform 1.2s cubic-bezier(0.22, 1, 0.36, 1);
        }

        .gallery-item.reveal {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- More Works Section (Auto-scroll) --- */
        .more-works-section { 
            margin-top: 100px; 
            padding-top: 60px; 
            border-top: 1px solid #eee; 
            margin-bottom: 80px;
            overflow: hidden; 
        }
        
        .more-works-title { 
            font-size: 14px; 
            letter-spacing: 3px; 
            text-transform: uppercase; 
            margin-bottom: 50px; 
            font-weight: 600; 
            font-family: "Lora", serif; 
            display: inline-block;
            position: relative;
            color: #1a1a1a;
        }
        
        .more-works-title::after {
            content: "";
            position: absolute;
            left: 0;
            bottom: -8px;
            width: 30px; 
            height: 1px;
            background: #1a1a1a;
            transition: width 0.6s cubic-bezier(0.2, 1, 0.3, 1);
        }

        .more-works-section:hover .more-works-title::after {
            width: 100%;
        }

        /* 滾動容器設定 */
        .more-grid-wrapper {
            overflow-x: auto;
            white-space: nowrap;
            padding-bottom: 20px;
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE/Edge */
        }
        .more-grid-wrapper::-webkit-scrollbar { display: none; } /* Chrome/Safari */

        .more-grid { 
            display: inline-flex; 
            gap: 30px; 
        }

        .more-item { 
            text-decoration: none; 
            color: #1a1a1a; 
            font-family: "Lora", serif; 
            display: inline-block;
            transition: opacity 0.3s;
            width: 400px; /* 網頁版固定寬度 */
            white-space: normal; 
            vertical-align: top;
        }
        
        .more-item:hover { opacity: 0.85; }
        
        .more-item .img-box { aspect-ratio: 3/2; overflow: hidden; margin-bottom: 15px; background: #f5f5f5; }
        .more-item img { width: 100%; height: 100%; object-fit: cover; display: block; transition: transform 1.2s cubic-bezier(0.2, 1, 0.3, 1); }
        .more-item:hover img { transform: scale(1.08); }
        
        .more-item h3 { 
            font-size: 16px; 
            font-weight: 500; 
            margin-top: 15px; 
            margin-bottom: 5px;
            letter-spacing: 0.5px;
            color: #1a1a1a;
        }

        /* 敘述文字改淡 */
        .more-item p { 
            font-size: 11px; 
            color: #b0b0b0; 
            text-transform: uppercase; 
            letter-spacing: 1.5px; 
        }

        @media (max-width: 768px) {
            .container-1024 { padding: 0 20px; }
            .more-item { width: 80vw; } /* 手機版呈現單排，寬度 80% */
            .more-grid { gap: 15px; }
        }
    </style>
</head>
<body oncontextmenu="return false;">

    <nav>
        <div class="logo"><a href="index.html" style="text-decoration:none; color:#1a1a1a;">+1 DESIGN</a></div>
        <div class="nav-links"><a href="index.html">Back to Works</a></div>
    </nav>

    <main class="project-container">
        <section class="project-info container-1024">
            <span id="proj-category"></span>
            <div class="title-wrapper">
                <h1 id="proj-title"></h1>
                <div class="title-line"></div>
            </div>
            <p id="proj-desc"></p>
        </section>

        <section id="proj-gallery" class="container-1024"></section>

        <section class="more-works-section container-1024">
            <h2 class="more-works-title">More Works</h2>
            <div class="more-grid-wrapper" id="moreScrollWrapper">
                <div id="more-works-grid" class="more-grid"></div>
            </div>
        </section>
    </main>

    <script src="data.js"></script>
    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            document.addEventListener('dragstart', (e) => { if (e.target.nodeName === 'IMG') e.preventDefault(); });

            const params = new URLSearchParams(window.location.search);
            const projectID = params.get('id');

            if (window.projectData) {
                const project = window.projectData.find(p => p.id === projectID);
                if (project) {
                    document.title = `${project.title} | +1 Design`;
                    document.getElementById('proj-title').innerText = project.title;
                    document.getElementById('proj-category').innerText = project.category;
                    document.getElementById('proj-desc').innerText = project.description;

                    const gallery = document.getElementById('proj-gallery');
                    if (project.details) {
                        project.details.forEach(imgSrc => {
                            const img = document.createElement('img');
                            img.src = imgSrc;
                            img.className = "gallery-item";
                            gallery.appendChild(img);
                        });
                        initScrollReveal();
                    }

                    // --- More Works 渲染與自動滾動邏輯 ---
                    const moreGrid = document.getElementById('more-works-grid');
                    const scrollWrapper = document.getElementById('moreScrollWrapper');
                    const otherProjects = window.projectData.filter(p => p.id !== projectID);
                    
                    // 複製兩次內容以達成無縫循環
                    const projectsToDisplay = [...otherProjects, ...otherProjects]; 

                    projectsToDisplay.forEach(p => {
                        const item = document.createElement('a');
                        item.href = `works.html?id=${p.id}`; 
                        item.className = 'more-item';
                        item.innerHTML = `
                            <div class="img-box"><img src="${p.image}" alt="${p.title}"></div>
                            <h3>${p.title}</h3>
                            <p>${p.category}</p>
                        `;
                        moreGrid.appendChild(item);
                    });

                    // 自動滾動邏輯
                    let isHovered = false;
                    scrollWrapper.addEventListener('mouseenter', () => isHovered = true);
                    scrollWrapper.addEventListener('mouseleave', () => isHovered = false);

                    function autoScroll() {
                        if (!isHovered) {
                            scrollWrapper.scrollLeft += 0.5; 
                            if (scrollWrapper.scrollLeft >= moreGrid.scrollWidth / 2) {
                                scrollWrapper.scrollLeft = 0;
                            }
                        }
                        requestAnimationFrame(autoScroll);
                    }
                    setTimeout(autoScroll, 1000);

                } else {
                    window.location.href = 'index.html';
                }
            }

            function initScrollReveal() {
                const observerOptions = { threshold: 0.1 };
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('reveal');
                            observer.unobserve(entry.target);
                        }
                    });
                }, observerOptions);
                document.querySelectorAll('.gallery-item').forEach(img => observer.observe(img));
            }
        });
    </script>
</body>
</html>
